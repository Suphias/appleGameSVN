using System;
using Xunit;
using AntDesigner.NetCore.GameCity;
using Moq;

namespace GameCityTest
{
    public class SeatTest
    {

       [Fact(DisplayName ="玩家坐下_玩家Id=座位无人")]
       public void PlayerSetDown_()
        {
            ISeat seat = new Seat();
            Mock < IPlayerSeat > playerMock= new Mock<IPlayerSeat>();
            playerMock.SetupGet<int>(p => p.id).Returns(1);
            var player = playerMock.Object;
            seat.PlayerSetDown(player);
            Assert.True(seat.IsEmpty == false);
            Assert.True(seat.PlayerId==player.id,"座位玩家Id不对");
        }
        [Fact(DisplayName = "玩家坐下_玩家Id=座位有人")]
        public void PlayerSetDown_PlayerExist()
        {
            ISeat seat = new Seat();
            Mock<IPlayerSeat> playerMock = new Mock<IPlayerSeat>();
            playerMock.SetupGet<int>(p => p.id).Returns(1);
            var player1 = playerMock.Object;
            seat.PlayerSetDown(player1);
            var player2 = playerMock.Object;
            Assert.Throws<Exception>(() => seat.PlayerSetDown(player2));

        }
        [Fact(DisplayName ="玩家离开座位")]
        public void PlayerLeaveSeat()
        {
            ISeat seat = new Seat();
            Mock<IPlayerSeat> playerMock = new Mock<IPlayerSeat>();
            playerMock.SetupGet<int>(p => p.id).Returns(1);
            var player = playerMock.Object;
            seat.PlayerSetDown(player);
            seat.PlayLeave();
            Assert.True(seat.IsEmpty == true);
            Assert.True(seat.PlayerId == 0,"座位玩家Id=0");
        }
    }
}

///////////////////////////////////////////////////////////
//  Account.cs
//  Implementation of the Class Account
//  Generated by Enterprise Architect
//  Created on:      16-11ÔÂ-2016 19:47:10
//  Original author: ant_d
///////////////////////////////////////////////////////////

using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Linq;



using AntDesigner.AppleGame.interFace;
using System.ComponentModel.DataAnnotations.Schema;
using System.ComponentModel.DataAnnotations;

namespace AntDesigner.AppleGame {
 
    public class Account :IIdCreateAndModifyTime{
        [ConcurrencyCheck]
        public decimal balance{ get;  set;}

        public static  event EventHandler accounBalanceChanged;
        
		public Account(){

		}
        public class changeDetail : EventArgs
        {
            public changeDetail(AccountDetail  accoutDetail_)
            {
                accoutDetail = accoutDetail_;
            }
      public AccountDetail accoutDetail { get; set; }
        }
        public Account(string name)
        {
            weixinName = name;
        }
        public int id
        {
            get;
            set;
        }
        /// 
        /// <param name="amount"></param>
        public void addmount(decimal amount,string explain){
            if (amount < 0 && (balance - amount) <0)
            {
                throw new ArgumentOutOfRangeException("Óà¶î²»×ã¹»!");
            }
                balance = balance + amount;
            AccountDetail accountDetail = new AccountDetail();
            accountDetail.amount = amount;
            accountDetail.explain = explain;
            accountDetails.Add(accountDetail);
            if (explain!="Ó®" ||explain !="ÏÂ×¢")
            {
                accounBalanceChanged.Invoke(this, new changeDetail(accountDetail));
            }
            return;
		}
      

        public string weixinName { get; set; }
        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        public DateTime createTime
        {
            get;
            set;
        }


        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        public DateTime? modifyTime {
			get;
			set;
		}
        public IList<AccountDetail> accountDetails
        {
            get;set;
        }
	}//end Account

}//end namespace AntDesigner.AppleGame
///////////////////////////////////////////////////////////
//  Player.cs
//  Implementation of the Class Player
//  Generated by Enterprise Architect
//  Created on:      16-11月-2016 19:47:12
//  Original author: ant_d
///////////////////////////////////////////////////////////

using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Linq;



using AntDesigner.AppleGame;
using AntDesigner.AppleGame.interFace;
using System.ComponentModel.DataAnnotations.Schema;
using System.ComponentModel.DataAnnotations;

namespace AntDesigner.AppleGame
{
    public class Player : IIdCreateAndModifyTime
    {

        public static Func<Player, IList<Player>> DgetFriendsOfPlayer { get; set; }
        public static Func<Player, IList<Message>> DgetMessagesOfPlayer { get; set; }
        public static Func<Message, Message> DsaveNewMessage { get; set; }
        internal IList<Message> seeMessags()
        {
           return  DgetMessagesOfPlayer(this);
        }

        public Player()
        {

        }

        public Player(string name)
        {
            weixinName = name;

        }
        public  Account account
        {
            get;
            set;
        }

        public IList<Player> seeFriends()
        {
            return DgetFriendsOfPlayer(this);
        }

        /// <summary>
        /// 提现
        /// </summary>
        /// <param name="amount"></param>
        public void drow(decimal amount)
        {

        }

        public IList<AccountDetail> getAccountDetails()
        {

            return this.account.accountDetails;
        }

        /// <summary>
        /// 充值
        /// </summary>
        /// <param name="amount"></param>
        public void recharge(decimal amount)
        {

        }

        /// 
        /// <param name="message"></param>
        public Message replyMessage(Message message,string content)
        {

            message.replyContent = content;
            return message;
        }


        /// <param name="reveiver"></param>
        /// <param name="content"></param>
        public Message sendMessageTo(Player receiver, string content)
        {

            Message message = new Message(this,content,receiver);
            DsaveNewMessage(message);
            return message;
        }
        [Required]
        public string weixinName
        {
            get;
            set;
        }
        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        public DateTime createTime
        {
            get;
            set;
        }

        public int id
        {
            get;
            set;
        }
        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        public DateTime? modifyTime
        {
            get;
            set;
        }
        public string introducerWeixinName { get; set; }
        public bool OnlineState { get; set; }

    }//end Player

}//end namespace AntDesigner.AppleGame